# 专辑图片批量抽卡工具

一款专为作业人员设计的高效批量抽卡工具，以专辑ID为核心维度，支持4张图片的单/批量抽卡、抽卡进度可视化、结果导出等功能。

## 功能特性

### 核心功能

1. **数据导入模块**
   - 支持CSV文件批量上传（最大500MB）
   - 自动校验字段格式
   - 处理重复数据（覆盖未抽卡，保留已抽卡）
   - 导入成功后自动跳转总览页

2. **抽卡进度总览页**
   - 统计卡片：总专辑数、未抽卡数、已抽卡数、抽卡完成率
   - 数据列表：支持筛选、搜索、分页
   - 批量操作：全选、批量抽卡（不通过）
   - 单专辑操作：跳转抽卡页面

3. **单专辑图片抽卡页**
   - 2×2网格布局展示4张图片
   - 单选机制：仅可选择1张或全不选
   - 通过/不通过操作
   - 抽卡进度实时显示

4. **抽卡结果导出**
   - 支持按筛选条件导出
   - UTF-8编码，Excel/记事本可直接打开
   - 自动生成带时间戳的文件名

## 技术栈

- **React 18** - UI框架
- **TypeScript** - 类型安全
- **Vite** - 构建工具
- **React Router** - 路由管理
- **LocalStorage** - 数据持久化

## 安装与运行

### 前置要求

- Node.js 16+ 
- npm 或 yarn

### 安装依赖

```bash
npm install
```

### 开发模式

```bash
npm run dev
```

访问 http://localhost:5173

### 生产构建

```bash
npm run build
```

构建产物在 `dist` 目录

## CSV文件格式

### 输入格式（导入）

CSV文件必须包含以下字段（按顺序）：

| 字段名 | 说明 |
|--------|------|
| 专辑id | 专辑唯一标识 |
| 专辑名称 | 专辑名称 |
| 书名 | 书名 |
| 赛道品类 | 赛道分类 |
| 图片1链接 | 第一张图片URL |
| 图片2链接 | 第二张图片URL |
| 图片3链接 | 第三张图片URL |
| 图片4链接 | 第四张图片URL |

**示例：**

```csv
专辑id,专辑名称,书名,赛道品类,图片1链接,图片2链接,图片3链接,图片4链接
ALB001,测试专辑1,测试书名1,文学,https://example.com/img1.jpg,https://example.com/img2.jpg,https://example.com/img3.jpg,https://example.com/img4.jpg
```

### 输出格式（导出）

导出CSV包含以下字段：

| 字段名 | 说明 |
|--------|------|
| 专辑id | 专辑唯一标识 |
| 专辑名称 | 专辑名称 |
| 书名 | 书名 |
| 赛道品类 | 赛道分类 |
| 图片链接 | 抽卡通过的图片链接，或"抽卡不通过"/"未抽卡" |
| 抽卡状态 | 已抽卡/未抽卡 |

## 使用说明

### 1. 导入数据

1. 点击「导入新数据」按钮
2. 选择符合格式的CSV文件
3. 系统自动解析并校验
4. 导入成功后跳转总览页

### 2. 抽卡专辑

**单专辑抽卡：**
1. 在总览页点击「抽卡」按钮
2. 在抽卡页面查看4张图片
3. 选择1张图片（或全不选）
4. 点击「通过」或「不通过」

**批量抽卡：**
1. 在总览页勾选未抽卡的专辑
2. 点击「批量抽卡（不通过）」
3. 确认后批量标记为抽卡不通过

### 3. 筛选与搜索

- **抽卡状态**：全部/已抽卡/未抽卡
- **搜索**：专辑ID或书名模糊搜索

### 4. 导出结果

1. 在总览页设置筛选条件（可选）
2. 点击「导出抽卡结果」
3. 文件自动下载

## 数据存储

- 所有数据存储在浏览器 LocalStorage
- 数据永久保存，刷新页面不丢失
- 已抽卡数据不可修改
- 操作日志自动记录

## 浏览器兼容性

- Chrome 90+
- Edge 90+
- Firefox 90+

## 性能指标

- CSV导入：支持最大500MB，10000条数据解析≤30s
- 图片加载：单张≤2s，4张同时加载无卡顿
- 批量抽卡：1000条数据处理≤10s

## 注意事项

1. **抽卡不可逆**：抽卡完成后不可修改，如需重新抽卡需删除数据后重新导入
2. **重复导入**：同一专辑ID重复导入时，会覆盖未抽卡数据，已抽卡数据保持不变
3. **图片加载**：无效图片链接会显示"图片加载失败"占位图
4. **数据安全**：所有数据存储在本地浏览器，请定期导出备份

## 开发说明

### 项目结构

```
csv-tool/
├── src/
│   ├── components/      # 通用组件
│   ├── pages/          # 页面组件
│   ├── types/          # TypeScript类型定义
│   ├── utils/          # 工具函数
│   │   ├── csvParser.ts    # CSV解析
│   │   ├── storage.ts      # 数据存储
│   │   └── export.ts       # 导出功能
│   ├── styles/         # 样式文件
│   ├── App.tsx         # 主应用组件
│   └── main.tsx        # 入口文件
├── package.json
└── vite.config.ts
```

### 核心模块

- **csvParser.ts**：CSV文件解析和导出
- **storage.ts**：数据持久化存储管理
- **export.ts**：抽卡结果导出逻辑

## 许可证

MIT
